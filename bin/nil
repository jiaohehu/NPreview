#!/bin/bash
#echo $1
#node -e "console.log($1)"
node -e "const { NitrilePreviewNode } = require ('../lib/nitrile-preview-node'); new NitrilePreviewNode().toLualatex('$1').then(f => { console.log(f); const lualatex = require('child_process').spawn('lualatex',['--interaction=scrollmode', '-halt-on-error', f]); lualatex.stdout.on('data',(data) => process.stdout.write(data)); lualatex.on('close',(code) => { console.log('lualatex process finished'); const path=require('path'); console.log(f); var of = f.slice(0,f.length-path.extname(f).length); of = of+'.pdf'; console.log(of); require('child_process').spawn('open',[of]);  } ); } ).catch(err => console.log(err))"


